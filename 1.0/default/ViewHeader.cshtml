@inherits RocketCatalog.Components.RocketCatalogTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketCatalog.Components;
@using DNNrocketAPI.Components;

@{
    var portalCatalog = (PortalCatalogLimpet)Model.List.First();
    var sessionParams = (SessionParams)Model.SessionParamsData;
    var paramInfo = (SimplisityInfo)Model.GetDataObject("paraminfo");
}

<script type="text/javascript" src="/DesktopModules/DNNrocket/Simplisity/js/simplisity.js"></script>
<script type="text/javascript" src="@(portalCatalog.EngineUrlWithProtocol)/DesktopModules/RocketThemes/rocketcatalog/@(portalCatalog.AppTheme.AppThemeFolder)/@(portalCatalog.AppTheme.AppVersionFolder)/js/frontend.js"></script>

<link rel="stylesheet" href="/DesktopModules/DNNrocket/fa/css/all.min.css">
<link rel="stylesheet" href="/DesktopModules/DNNrocket/css/w3.css">
<link rel="stylesheet" href="@(portalCatalog.EngineUrlWithProtocol)/DesktopModules/RocketThemes/rocketcatalog/@(portalCatalog.AppTheme.AppThemeFolder)/@(portalCatalog.AppTheme.AppVersionFolder)/css/AgenceSesame.css">

<script type="text/javascript" src="@(portalCatalog.EngineUrlWithProtocol)/DesktopModules/RocketThemes/rocketcatalog/@(portalCatalog.AppTheme.AppThemeFolder)/@(portalCatalog.AppTheme.AppVersionFolder)/js/jquery.cookie.js"></script>
<script type="text/javascript" src="@(portalCatalog.EngineUrlWithProtocol)/DesktopModules/RocketThemes/rocketcatalog/@(portalCatalog.AppTheme.AppThemeFolder)/@(portalCatalog.AppTheme.AppVersionFolder)/js/jquery.treegrid.min.js"></script>
<link rel="stylesheet" href="@(portalCatalog.EngineUrlWithProtocol)/DesktopModules/RocketThemes/rocketcatalog/@(portalCatalog.AppTheme.AppThemeFolder)/@(portalCatalog.AppTheme.AppVersionFolder)/css/jquery.treegrid.css">


<script>

    $(document).ready(function () {
        $(document).simplisityStartUp('@(portalCatalog.EngineUrlWithProtocol)/Desktopmodules/dnnrocket/api/rocket/action', { systemkey: 'rocketecommerce', debug: false });

        @{
            // THESE VALUES ARE NEEDED FOR REMOTE RENDERING, POPULATE THEM ON FIRST LOAD (In the module OnInit(EventArgs e)),
            //  THEN ADD THEM TO SESSIONPARAMS SO THEY ARE AVAILABLE FOR REMOTE SERVER RENDERING.
        }
        simplisity_setSessionField("pageurl", '@sessionParams.PageUrl');
        simplisity_setSessionField("sitekey", '@sessionParams.SiteKey');
        simplisity_setSessionField('culturecode', '@sessionParams.CultureCode');

    });

</script>

